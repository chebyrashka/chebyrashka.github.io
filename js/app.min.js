!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(e){function t(t){var o={},a=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!a.test(t.name)&&(o[t.name]=t.value)}),o}function o(t,o){var a=this,l=e(a);if(a.value===l.attr("placeholder")&&l.hasClass(p.customClass))if(a.value="",l.removeClass(p.customClass),l.data("placeholder-password")){if(l=l.hide().nextAll('input[type="password"]:first').show().attr("id",l.removeAttr("id").data("placeholder-id")),t===!0)return l[0].value=o,o;l.focus()}else a==n()&&a.select()}function a(a){var n,l=this,s=e(l),i=l.id;if(a&&"blur"===a.type){if(s.hasClass(p.customClass))return;if("password"===l.type&&(n=s.prevAll('input[type="text"]:first'),n.length>0&&n.is(":visible")))return}if(""===l.value){if("password"===l.type){if(!s.data("placeholder-textinput")){try{n=s.clone().prop({type:"text"})}catch(d){n=e("<input>").attr(e.extend(t(this),{type:"text"}))}n.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":s,"placeholder-id":i}).bind("focus.placeholder",o),s.data({"placeholder-textinput":n,"placeholder-id":i}).before(n)}l.value="",s=s.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",s.data("placeholder-id")).show()}else{var r=s.data("placeholder-password");r&&(r[0].value="",s.attr("id",s.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"))}s.addClass(p.customClass),s[0].value=s.attr("placeholder")}else s.removeClass(p.customClass)}function n(){try{return document.activeElement}catch(e){}}var l,s,i="[object OperaMini]"===Object.prototype.toString.call(window.operamini),d="placeholder"in document.createElement("input")&&!i,r="placeholder"in document.createElement("textarea")&&!i,c=e.valHooks,h=e.propHooks,p={};d&&r?(s=e.fn.placeholder=function(){return this},s.input=!0,s.textarea=!0):(s=e.fn.placeholder=function(t){var n={customClass:"placeholder"};return p=e.extend({},n,t),this.filter((d?"textarea":":input")+"[placeholder]").not("."+p.customClass).bind({"focus.placeholder":o,"blur.placeholder":a}).data("placeholder-enabled",!0).trigger("blur.placeholder")},s.input=d,s.textarea=r,l={get:function(t){var o=e(t),a=o.data("placeholder-password");return a?a[0].value:o.data("placeholder-enabled")&&o.hasClass(p.customClass)?"":t.value},set:function(t,l){var s,i,d=e(t);return""!==l&&(s=d.data("placeholder-textinput"),i=d.data("placeholder-password"),s?(o.call(s[0],!0,l)||(t.value=l),s[0].value=l):i&&(o.call(t,!0,l)||(i[0].value=l),t.value=l)),d.data("placeholder-enabled")?(""===l?(t.value=l,t!=n()&&a.call(t)):(d.hasClass(p.customClass)&&o.call(t),t.value=l),d):(t.value=l,d)}},d||(c.input=l,h.value=l),r||(c.textarea=l,h.value=l),e(function(){e(document).delegate("form","submit.placeholder",function(){var t=e("."+p.customClass,this).each(function(){o.call(this,!0,"")});setTimeout(function(){t.each(a)},10)})}),e(window).bind("beforeunload.placeholder",function(){e("."+p.customClass).each(function(){this.value=""})}))}),function(e){e.fn.columnize=function(t){var o={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,manualBreaks:!1,cssClassPrefix:""};return t=e.extend(o,t),"string"==typeof t.width&&(t.width=parseInt(t.width,10),isNaN(t.width)&&(t.width=o.width)),this.each(function(){function a(e,t){var o=t?".":"";return f.length?o+f+"-"+e:o+e}function n(o,n,l,s){for(;(u||l.height()<s)&&n[0].childNodes.length;){var i=n[0].childNodes[0];if(e(i).find(a("columnbreak",!0)).length)return;if(e(i).hasClass(a("columnbreak")))return;o.append(i)}if(0!==o[0].childNodes.length){var d=o[0].childNodes,r=d[d.length-1];o[0].removeChild(r);var c=e(r);if(3==c[0].nodeType){var h=c[0].nodeValue,p=t.width/18;t.accuracy&&(p=t.accuracy);for(var f,m=null;l.height()<s&&h.length;){var v=h.indexOf(" ",p);f=-1!=v?h.substring(0,h.indexOf(" ",p)):h,m=document.createTextNode(f),o.append(m),h=h.length>p&&-1!=v?h.substring(v):""}if(l.height()>=s&&null!==m&&(o[0].removeChild(m),h=m.nodeValue+h),!h.length)return!1;c[0].nodeValue=h}return n.contents().length?n.prepend(c):n.append(c),3==c[0].nodeType}}function l(e,t,o,s){if(!e.contents(":last").find(a("columnbreak",!0)).length&&!e.contents(":last").hasClass(a("columnbreak"))&&t.contents().length){var i=t.contents(":first");if(1!=i.get(0).nodeType)return;var d=i.clone(!0);i.hasClass(a("columnbreak"))?(e.append(d),i.remove()):u?(e.append(d),i.remove()):1!=d.get(0).nodeType||d.hasClass(a("dontend"))||(e.append(d),d.is("img")&&o.height()<s+20?i.remove():!i.hasClass(a("dontsplit"))&&o.height()<s+20?i.remove():d.is("img")||i.hasClass(a("dontsplit"))?d.remove():(d.empty(),n(d,i,o,s)?i.addClass(a("split")):(i.addClass(a("split")),i.children().length&&l(d,i,o,s)),0===d.get(0).childNodes.length&&d.remove()))}}function s(){if(!r.data("columnized")||1!=r.children().length){if(r.data("columnized",!0),r.data("columnizing",!0),r.empty(),r.append(e("<div class='"+a("first")+" "+a("last")+" "+a("column")+" ' style='width:100%; float: "+t.columnFloat+";'></div>")),$col=r.children().eq(r.children().length-1),$destroyable=h.clone(!0),t.overflow){for(targetHeight=t.overflow.height,n($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(a("dontend"))||l($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&i($col.contents(":last").get(0));){var o=$col.contents(":last");o.remove(),$destroyable.prepend(o)}for(var s="",d=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var c=$destroyable[0].childNodes[0];if(c.attributes)for(var p=0;p<c.attributes.length;p++)0===c.attributes[p].nodeName.indexOf("jQuery")&&c.removeAttribute(c.attributes[p].nodeName);d.innerHTML="",d.appendChild($destroyable[0].childNodes[0]),s+=d.innerHTML}var u=e(t.overflow.id)[0];u.innerHTML=s}else $col.append($destroyable);r.data("columnizing",!1),t.overflow&&t.overflow.doneFunc&&t.overflow.doneFunc()}}function i(t){return 3==t.nodeType?/^\s+$/.test(t.nodeValue)&&t.previousSibling?i(t.previousSibling):!1:1!=t.nodeType?!1:e(t).hasClass(a("dontend"))?!0:0===t.childNodes.length?!1:i(t.childNodes[t.childNodes.length-1])}function d(){if(m=0,p!=r.width()){p=r.width();var o=Math.round(r.width()/t.width),d=t.width,f=t.height;if(t.columns&&(o=t.columns),u&&(o=h.find(a("columnbreak",!0)).length+1,d=!1),1>=o)return s();if(!r.data("columnizing")){r.data("columnized",!0),r.data("columnizing",!0),r.empty(),r.append(e("<div style='width:"+Math.floor(100/o)+"%; float: "+t.columnFloat+";'></div>")),y=r.children(":last"),y.append(h.clone()),c=y.height(),r.empty();var v=c/o,$=3,g=!1;t.overflow?($=1,v=t.overflow.height):f&&d&&($=1,v=f,g=!0);for(var w=0;$>w&&20>w;w++){r.empty();var C,b,y,x;try{C=h.clone(!0)}catch(T){C=h.clone()}C.css("visibility","hidden");for(var k=0;o>k;k++)b=0===k?a("first"):"",b+=" "+a("column"),b=k==o-1?a("last")+" "+b:b,r.append(e("<div class='"+b+"' style='width:"+Math.floor(100/o)+"%; float: "+t.columnFloat+";'></div>"));for(k=0;k<o-(t.overflow?0:1)||g&&C.contents().length;){for(r.children().length<=k&&r.append(e("<div class='"+b+"' style='width:"+Math.floor(100/o)+"%; float: "+t.columnFloat+";'></div>")),y=r.children().eq(k),g&&y.width(d+"px"),n(y,C,y,v),l(y,C,y,v);y.contents(":last").length&&i(y.contents(":last").get(0));)x=y.contents(":last"),x.remove(),C.prepend(x);k++,0===y.contents().length&&C.contents().length?y.append(C.contents(":first")):k!=o-(t.overflow?0:1)||t.overflow||C.find(a("columnbreak",!0)).length&&o++}if(t.overflow&&!g){var N=!1,z=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(N||z){for(var M="",I=document.createElement("DIV");C[0].childNodes.length>0;){var L=C[0].childNodes[0];for(k=0;k<L.attributes.length;k++)0===L.attributes[k].nodeName.indexOf("jQuery")&&L.removeAttribute(L.attributes[k].nodeName);I.innerHTML="",I.appendChild(C[0].childNodes[0]),M+=I.innerHTML}var H=e(t.overflow.id)[0];H.innerHTML=M}else e(t.overflow.id).empty().append(C.contents().clone(!0))}else if(g)r.children().each(function(e){y=r.children().eq(e),y.width(d+"px"),0===e?y.addClass(a("first")):e==r.children().length-1?y.addClass(a("last")):(y.removeClass(a("first")),y.removeClass(a("last")))}),r.width(r.children().length*d+"px");else{y=r.children().eq(r.children().length-1),C.contents().each(function(){y.append(e(this))});var O=(y.height(),0),j=1e7,A=0,F=!1,q=0;r.children().each(function(e){return function(t){var o=e.children().eq(t),n=o.children(":last").find(a("columnbreak",!0)).length;if(!n){var l=o.height();F=!1,O+=l,l>A&&(A=l,F=!0),j>l&&(j=l),q++}}}(r));var E=O/q;0===O?w=$:t.lastNeverTallest&&F?(m+=30,v+=30,w==$-1&&$++):A-j>30?v=E+30:Math.abs(E-v)>20?v=E:w=$}}r.find(a("column",!0)).find(":first"+a("removeiffirst",!0)).remove(),r.find(a("column",!0)).find(":last"+a("removeiflast",!0)).remove(),r.data("columnizing",!1),t.overflow&&t.overflow.doneFunc(),t.doneFunc()}}}var r=e(t.target?t.target:this),c=e(this).height(),h=e("<div></div>"),p=0,u=t.manualBreaks,f=o.cssClassPrefix;"string"==typeof t.cssClassPrefix&&(f=t.cssClassPrefix);var m=0;if(h.append(e(this).contents().clone(!0)),!t.ignoreImageLoading&&!t.target&&!r.data("imageLoaded")&&(r.data("imageLoaded",!0),e(this).find("img").length>0)){var v=function(e,o){return function(){e.data("firstImageLoaded")||(e.data("firstImageLoaded","true"),e.empty().append(o.children().clone(!0)),e.columnize(t))}}(e(this),h);return e(this).find("img").one("load",v),void e(this).find("img").one("abort",v)}r.empty(),d(),t.buildOnce||e(window).resize(function(){t.buildOnce||(r.data("timeout")&&clearTimeout(r.data("timeout")),r.data("timeout",setTimeout(d,200)))})})}}(jQuery),$(document).ready(function(){function e(){$(".post").removeClass("dontsplit"),$(".posts .column").each(function(){$(this).children().clone(!0).appendTo(".posts")}),$(".posts .content .tools").remove(),$(".posts .column").remove()}function t(){return $(".modal, .modal-bg").fadeOut().queue(function(e){$(".modal, .modal-bg").remove(),e()}),!1}$("input, textarea").placeholder(),$(".photo.video a").append("<span></span>"),$(".masthead input[type=text]").addClass("off"),$(".masthead input[type=text]").on("focus",function(){$(this).removeClass("off")}),$(".settings .avatar a").on("click",function(){}),$(".posts.view-list > .post").each(function(){$(this).children(".photo").size()>0&&$(this).addClass("noborder")}),$(".post .content").each(function(){$(this).siblings(".responses").size()>0&&$(this).append('<a href="#!" class="expand" data-togglevalue="Collapse">Expand</a>')}),$(".post .content").on("click",".expand",function(e){var t=$(this).text();$(this).text($(this).data("togglevalue")),$(this).data("togglevalue",t),$(this).toggleClass("on"),$(this).parent().next(".responses").slideToggle(),e.preventDefault()}),$(".post:gt(5)").hide(),$(".load-more").on("click",function(){$(".post:gt(5)").slideToggle(),$(this).hide()}),$(".view-mode a.view-list").on("click",function(){if($(".posts.view-list").size()<=0){$(".view-mode a").removeClass("on"),$(this).addClass("on");var t=$(this).data("viewmode"),o=$(".posts").attr("class").split(" ")[1];$(".posts").removeClass(o).addClass(t),$(".load-more").hide(),e()}return!1}),$(".view-mode a.view-tile").on("click",function(){if($(".posts.view-tile").size()<=0){$(".post").show(),$(".view-mode a").removeClass("on"),$(this).addClass("on");var e=$(this).data("viewmode"),t=$(".posts").attr("class").split(" ")[1];$(".posts").removeClass(t).addClass(e),$(".posts > .post > .content").each(function(){$(this).children(".expand").size()>0&&$(this).closest(".post").children(".tools").clone().appendTo($(this).closest(".post").find(".content"))}),$(".post").addClass("dontsplit"),$(".posts").columnize({columns:3,lastNeverTallest:!0}),$(".load-more").hide()}return!1}),$(".filter a.all").on("click",function(){return 0==$(this).hasClass("on")&&($(".posts").removeClass("view-tile").addClass("view-list"),$(".filter a").removeClass("on"),$(this).addClass("on"),$(".view-mode").show(),$(".post").show(),$(".load-more").hide(),e()),!1}),$(".filter a.photos").on("click",function(){return $(".posts").removeClass("view-list").addClass("view-tile"),$(".filter a").removeClass("on"),$(this).addClass("on"),$(".view-mode").hide(),$(".posts .column").each(function(){$(this).children().clone(!0).appendTo(".posts")}),$(".posts .content .tools").remove(),$(".posts .column").remove(),$(".post").addClass("dontsplit"),$(".post ").show(),$(".post ").not($(".photo:not(.video)").parent()).hide(),$(".posts").columnize({columns:3,lastNeverTallest:!0}),$(".load-more").hide(),!1}),$(".filter a.videos").on("click",function(){return $(".posts").removeClass("view-list").addClass("view-tile"),$(".filter a").removeClass("on"),$(this).addClass("on"),$(".view-mode").hide(),$(".posts .column").each(function(){$(this).children().clone(!0).appendTo(".posts")}),$(".posts .content .tools").remove(),$(".posts .column").remove(),$(".post").addClass("dontsplit"),$(".post ").show(),$(".post ").not($(".photo.video").parent()).hide(),$(".posts").columnize({columns:3,lastNeverTallest:!0}),$(".load-more").hide(),!1}),$(".newmsg").on("click",function(){return $("body").append('<div class="modal-bg"></div>'),$("body").append('<div class="modal" tabindex="0"></div>'),$(".modal").load("sub-createmsg.html",function(){$(".modal section").append('<a href="#!" class="close">Close</a>'),$(".modal-bg").fadeIn(500),$(".modal").delay(500).fadeIn(500)}),!1}),$(".posts .photo a").on("click",function(){return $("body").append('<div class="modal-bg"></div>'),$("body").append('<div class="modal photo" tabindex="0"></div>'),$(this).closest(".post").clone().appendTo(".modal"),$(".modal .photo").prependTo(".modal"),$(".modal .post .content").after('<div class="responses"><form method="post" action="#!"><input type="text" placeholder="Reply" /></form></div>'),$(".modal .photo").append('<a href="#!" class="close">Close</a>'),$(".modal-bg").fadeIn(500),$(".modal").delay(500).fadeIn(500),!1}),$("body").on("click",".close",t),$("body").on("click",".modal-bg",t),$(document).keyup(function(e){27==e.keyCode&&t()})});